; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.40629.0 

	TITLE	D:\Metin2\Metin2\client_source_clean\client_source_clean\source\UserInterface\AffectFlagContainer.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB OLDNAMES

PUBLIC	??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN?$CF@ ; `string'
PUBLIC	??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPos@ ; `string'
;	COMDAT ??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPos@
CONST	SEGMENT
??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPos@ DB 'CAffectFlag'
	DB	'Container::IsSet(uPos=%d>%d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN?$CF@
CONST	SEGMENT
??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN?$CF@ DB 'CAffe'
	DB	'ctFlagContainer::Set(uPos=%d>%d, isSet=%d', 00H ; `string'
PUBLIC	?IsSet@CAffectFlagContainer@@QBE_NI@Z		; CAffectFlagContainer::IsSet
PUBLIC	?Set@CAffectFlagContainer@@QAEXI_N@Z		; CAffectFlagContainer::Set
PUBLIC	?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z ; CAffectFlagContainer::ConvertToPosition
PUBLIC	?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z	; CAffectFlagContainer::CopyData
PUBLIC	?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z	; CAffectFlagContainer::CopyInstance
PUBLIC	?Clear@CAffectFlagContainer@@QAEXXZ		; CAffectFlagContainer::Clear
PUBLIC	??1CAffectFlagContainer@@QAE@XZ			; CAffectFlagContainer::~CAffectFlagContainer
PUBLIC	??0CAffectFlagContainer@@QAE@XZ			; CAffectFlagContainer::CAffectFlagContainer
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ??0CAffectFlagContainer@@QAE@XZ
_TEXT	SEGMENT
??0CAffectFlagContainer@@QAE@XZ PROC			; CAffectFlagContainer::CAffectFlagContainer, COMDAT
; _this$ = ecx

; 6    : 	Clear();

  00000	e8 00 00 00 00	 call	 ?Clear@CAffectFlagContainer@@QAEXXZ ; CAffectFlagContainer::Clear

; 7    : }

  00005	8b c1		 mov	 eax, ecx
  00007	c3		 ret	 0
??0CAffectFlagContainer@@QAE@XZ ENDP			; CAffectFlagContainer::CAffectFlagContainer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ??1CAffectFlagContainer@@QAE@XZ
_TEXT	SEGMENT
??1CAffectFlagContainer@@QAE@XZ PROC			; CAffectFlagContainer::~CAffectFlagContainer, COMDAT
; _this$dead$ = ecx

; 11   : }

  00000	c3		 ret	 0
??1CAffectFlagContainer@@QAE@XZ ENDP			; CAffectFlagContainer::~CAffectFlagContainer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?Clear@CAffectFlagContainer@@QAEXXZ
_TEXT	SEGMENT
?Clear@CAffectFlagContainer@@QAEXXZ PROC		; CAffectFlagContainer::Clear, COMDAT
; _this$ = ecx

; 14   : {

  00000	0f 57 c0	 xorps	 xmm0, xmm0

; 15   : 	memset(m_aElement, 0, sizeof(m_aElement));

  00003	66 0f d6 01	 movq	 QWORD PTR [ecx], xmm0

; 16   : }

  00007	c3		 ret	 0
?Clear@CAffectFlagContainer@@QAEXXZ ENDP		; CAffectFlagContainer::Clear
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z
_TEXT	SEGMENT
_c_rkAffectContainer$ = 8				; size = 4
?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z PROC	; CAffectFlagContainer::CopyInstance, COMDAT
; _this$ = ecx

; 19   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 20   : 	memcpy(m_aElement, c_rkAffectContainer.m_aElement, sizeof(m_aElement));

  00003	8b 55 08	 mov	 edx, DWORD PTR _c_rkAffectContainer$[ebp]
  00006	8b 02		 mov	 eax, DWORD PTR [edx]
  00008	89 01		 mov	 DWORD PTR [ecx], eax
  0000a	8b 42 04	 mov	 eax, DWORD PTR [edx+4]
  0000d	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 21   : }

  00010	5d		 pop	 ebp
  00011	c2 04 00	 ret	 4
?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z ENDP	; CAffectFlagContainer::CopyInstance
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z
_TEXT	SEGMENT
_this$1$ = -4						; size = 4
_uPos$ = 8						; size = 4
_uByteSize$dead$ = 12					; size = 4
_uBitEnd$1$ = 16					; size = 4
_c_pvData$ = 16						; size = 4
?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z PROC	; CAffectFlagContainer::CopyData, COMDAT
; _this$ = ecx

; 24   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	53		 push	 ebx
  00005	56		 push	 esi

; 25   : 	const BYTE* c_pbData=(const BYTE*)c_pvData; 
; 26   : 	Element bMask=0x01;
; 27   : 
; 28   : 	UINT uBitEnd=uPos+uByteSize*8;

  00006	8b 75 08	 mov	 esi, DWORD PTR _uPos$[ebp]
  00009	b3 01		 mov	 bl, 1
  0000b	57		 push	 edi
  0000c	8b 7d 10	 mov	 edi, DWORD PTR _c_pvData$[ebp]
  0000f	89 4d fc	 mov	 DWORD PTR _this$1$[ebp], ecx
  00012	8d 46 20	 lea	 eax, DWORD PTR [esi+32]
  00015	89 45 10	 mov	 DWORD PTR _uBitEnd$1$[ebp], eax

; 29   : 	for (UINT i=uPos; i<uBitEnd; ++i)

  00018	3b f0		 cmp	 esi, eax
  0001a	73 23		 jae	 SHORT $LN2@CopyData
  0001c	8d 64 24 00	 npad	 4
$LL4@CopyData:

; 30   : 	{
; 31   : 		Set(i, (*c_pbData & bMask) ? true : false);

  00020	84 1f		 test	 BYTE PTR [edi], bl
  00022	0f 95 c0	 setne	 al
  00025	0f b6 c0	 movzx	 eax, al
  00028	50		 push	 eax
  00029	56		 push	 esi
  0002a	e8 00 00 00 00	 call	 ?Set@CAffectFlagContainer@@QAEXI_N@Z ; CAffectFlagContainer::Set

; 32   : 		bMask<<=1;

  0002f	02 db		 add	 bl, bl

; 33   : 
; 34   : 		if (bMask==0)

  00031	75 03		 jne	 SHORT $LN3@CopyData

; 35   : 		{
; 36   : 			++c_pbData;

  00033	47		 inc	 edi

; 37   : 			bMask=0x01;

  00034	b3 01		 mov	 bl, 1
$LN3@CopyData:

; 29   : 	for (UINT i=uPos; i<uBitEnd; ++i)

  00036	8b 4d fc	 mov	 ecx, DWORD PTR _this$1$[ebp]
  00039	46		 inc	 esi
  0003a	3b 75 10	 cmp	 esi, DWORD PTR _uBitEnd$1$[ebp]
  0003d	72 e1		 jb	 SHORT $LL4@CopyData
$LN2@CopyData:
  0003f	5f		 pop	 edi
  00040	5e		 pop	 esi
  00041	5b		 pop	 ebx

; 38   : 		}
; 39   : 	}
; 40   : }

  00042	8b e5		 mov	 esp, ebp
  00044	5d		 pop	 ebp
  00045	c2 0c 00	 ret	 12			; 0000000cH
?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z ENDP	; CAffectFlagContainer::CopyData
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z
_TEXT	SEGMENT
_uRetX$ = 8						; size = 4
_uRetY$ = 12						; size = 4
?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z PROC ; CAffectFlagContainer::ConvertToPosition, COMDAT
; _this$ = ecx

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 44   : 	DWORD* pos = (DWORD*)m_aElement;
; 45   : 	*uRetX = pos[0];

  00003	8b 45 08	 mov	 eax, DWORD PTR _uRetX$[ebp]
  00006	8b 11		 mov	 edx, DWORD PTR [ecx]
  00008	89 10		 mov	 DWORD PTR [eax], edx

; 46   : 	*uRetY = pos[1];

  0000a	8b 45 0c	 mov	 eax, DWORD PTR _uRetY$[ebp]
  0000d	8b 49 04	 mov	 ecx, DWORD PTR [ecx+4]
  00010	89 08		 mov	 DWORD PTR [eax], ecx

; 47   : }

  00012	5d		 pop	 ebp
  00013	c2 08 00	 ret	 8
?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z ENDP ; CAffectFlagContainer::ConvertToPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?Set@CAffectFlagContainer@@QAEXI_N@Z
_TEXT	SEGMENT
_uPos$ = 8						; size = 4
_isSet$ = 12						; size = 1
?Set@CAffectFlagContainer@@QAEXI_N@Z PROC		; CAffectFlagContainer::Set, COMDAT
; _this$ = ecx

; 61   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 62   : 	if (uPos/8>=BYTE_SIZE)

  00006	8b 4d 08	 mov	 ecx, DWORD PTR _uPos$[ebp]
  00009	8b d1		 mov	 edx, ecx
  0000b	c1 ea 03	 shr	 edx, 3
  0000e	83 fa 08	 cmp	 edx, 8
  00011	72 1c		 jb	 SHORT $LN3@Set

; 63   : 	{
; 64   : 		TraceError("CAffectFlagContainer::Set(uPos=%d>%d, isSet=%d", uPos, BYTE_SIZE*8, isSet);

  00013	8b 45 0c	 mov	 eax, DWORD PTR _isSet$[ebp]
  00016	0f b6 c0	 movzx	 eax, al
  00019	50		 push	 eax
  0001a	6a 40		 push	 64			; 00000040H
  0001c	51		 push	 ecx
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN?$CF@
  00022	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00027	83 c4 10	 add	 esp, 16			; 00000010H
  0002a	5e		 pop	 esi

; 75   : }

  0002b	5d		 pop	 ebp
  0002c	c2 08 00	 ret	 8
$LN3@Set:

; 65   : 		return;
; 66   : 	}
; 67   : 
; 68   : 	BYTE& rElement=m_aElement[uPos/8];
; 69   : 
; 70   : 	BYTE bMask=BYTE(1<<(uPos&7));

  0002f	83 e1 07	 and	 ecx, 7
  00032	b0 01		 mov	 al, 1
  00034	d2 e0		 shl	 al, cl

; 71   : 	if (isSet)

  00036	80 7d 0c 00	 cmp	 BYTE PTR _isSet$[ebp], 0
  0003a	74 08		 je	 SHORT $LN2@Set

; 72   : 		rElement|=bMask;

  0003c	08 04 32	 or	 BYTE PTR [edx+esi], al
  0003f	5e		 pop	 esi

; 75   : }

  00040	5d		 pop	 ebp
  00041	c2 08 00	 ret	 8
$LN2@Set:

; 73   : 	else
; 74   : 		rElement&=~bMask;

  00044	f6 d0		 not	 al
  00046	20 04 32	 and	 BYTE PTR [edx+esi], al
  00049	5e		 pop	 esi

; 75   : }

  0004a	5d		 pop	 ebp
  0004b	c2 08 00	 ret	 8
?Set@CAffectFlagContainer@@QAEXI_N@Z ENDP		; CAffectFlagContainer::Set
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\affectflagcontainer.cpp
;	COMDAT ?IsSet@CAffectFlagContainer@@QBE_NI@Z
_TEXT	SEGMENT
_uPos$ = 8						; size = 4
?IsSet@CAffectFlagContainer@@QBE_NI@Z PROC		; CAffectFlagContainer::IsSet, COMDAT
; _this$ = ecx

; 78   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 79   : 	if (uPos/8>=BYTE_SIZE)

  00006	8b 4d 08	 mov	 ecx, DWORD PTR _uPos$[ebp]
  00009	8b d1		 mov	 edx, ecx
  0000b	c1 ea 03	 shr	 edx, 3
  0000e	83 fa 08	 cmp	 edx, 8
  00011	72 17		 jb	 SHORT $LN2@IsSet

; 80   : 	{
; 81   : 		TraceError("CAffectFlagContainer::IsSet(uPos=%d>%d", uPos, BYTE_SIZE*8);

  00013	6a 40		 push	 64			; 00000040H
  00015	51		 push	 ecx
  00016	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPos@
  0001b	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00020	83 c4 0c	 add	 esp, 12			; 0000000cH

; 82   : 		return false;

  00023	32 c0		 xor	 al, al
  00025	5e		 pop	 esi

; 89   : 		return true;
; 90   : 
; 91   : 	return false;
; 92   : }

  00026	5d		 pop	 ebp
  00027	c2 04 00	 ret	 4
$LN2@IsSet:

; 83   : 	}
; 84   : 
; 85   : 	const BYTE& c_rElement=m_aElement[uPos/8];
; 86   : 
; 87   : 	BYTE bMask=BYTE(1<<(uPos&7));

  0002a	83 e1 07	 and	 ecx, 7
  0002d	b0 01		 mov	 al, 1
  0002f	d2 e0		 shl	 al, cl

; 88   : 	if (c_rElement&bMask)

  00031	84 04 32	 test	 al, BYTE PTR [edx+esi]
  00034	5e		 pop	 esi
  00035	0f 95 c0	 setne	 al

; 89   : 		return true;
; 90   : 
; 91   : 	return false;
; 92   : }

  00038	5d		 pop	 ebp
  00039	c2 04 00	 ret	 4
?IsSet@CAffectFlagContainer@@QBE_NI@Z ENDP		; CAffectFlagContainer::IsSet
_TEXT	ENDS
END
