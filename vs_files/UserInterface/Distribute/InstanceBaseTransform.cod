; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.40629.0 

	TITLE	D:\Metin2\Metin2\client_source_clean\client_source_clean\source\UserInterface\InstanceBaseTransform.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB OLDNAMES

EXTRN	?LookAt@CActorInstance@@QAEXPAV1@@Z:PROC	; CActorInstance::LookAt
EXTRN	?LookAt@CActorInstance@@QAEXMM@Z:PROC		; CActorInstance::LookAt
EXTRN	?LookAtFlyTarget@CActorInstance@@QAEXXZ:PROC	; CActorInstance::LookAtFlyTarget
EXTRN	?BlendRotation@CActorInstance@@QAEXMM@Z:PROC	; CActorInstance::BlendRotation
;	COMDAT ?s_dirRot@?5??GetDegreeFromDirection@CInstanceBase@@QAEMH@Z@4PAMA
CONST	SEGMENT
?s_dirRot@?5??GetDegreeFromDirection@CInstanceBase@@QAEMH@Z@4PAMA DD 043340000r ; 180 ; `CInstanceBase::GetDegreeFromDirection'::`6'::s_dirRot
	DD	043070000r			; 135
	DD	042b40000r			; 90
	DD	042340000r			; 45
	DD	000000000r			; 0
	DD	0439d8000r			; 315
	DD	043870000r			; 270
	DD	043610000r			; 225
PUBLIC	?GetDegreeFromDirection@CInstanceBase@@QAEMH@Z	; CInstanceBase::GetDegreeFromDirection
PUBLIC	?SetDirection@CInstanceBase@@QAEXH@Z		; CInstanceBase::SetDirection
PUBLIC	?NEW_LookAtDestPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z ; CInstanceBase::NEW_LookAtDestPixelPosition
PUBLIC	?NEW_LookAtFlyTarget@CInstanceBase@@QAEXXZ	; CInstanceBase::NEW_LookAtFlyTarget
PUBLIC	?NEW_SetPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z ; CInstanceBase::NEW_SetPixelPosition
PUBLIC	?SCRIPT_SetPixelPosition@CInstanceBase@@QAEXMM@Z ; CInstanceBase::SCRIPT_SetPixelPosition
PUBLIC	?SetRotation@CInstanceBase@@QAEXM@Z		; CInstanceBase::SetRotation
PUBLIC	?NEW_GetPixelPosition@CInstanceBase@@QAEXPAUD3DXVECTOR3@@@Z ; CInstanceBase::NEW_GetPixelPosition
PUBLIC	?BlendRotation@CInstanceBase@@QAEXMM@Z		; CInstanceBase::BlendRotation
PUBLIC	?NEW_LookAtDestInstance@CInstanceBase@@QAEXAAV1@@Z ; CInstanceBase::NEW_LookAtDestInstance
PUBLIC	?GetRotation@CInstanceBase@@QAEMXZ		; CInstanceBase::GetRotation
PUBLIC	?GetAdvancingRotation@CInstanceBase@@QAEMXZ	; CInstanceBase::GetAdvancingRotation
	ALIGN	4

_piecewise_construct DB 01H DUP (?)
_BSS	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?GetAdvancingRotation@CInstanceBase@@QAEMXZ
_TEXT	SEGMENT
tv69 = -4						; size = 4
?GetAdvancingRotation@CInstanceBase@@QAEMXZ PROC	; CInstanceBase::GetAdvancingRotation, COMDAT
; _this$ = ecx

; 56   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 57   : 	return m_GraphicThingInstance.GetAdvancingRotation();

  00004	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  0000a	e8 00 00 00 00	 call	 ?GetAdvancingRotation@CActorInstance@@QAEMXZ ; CActorInstance::GetAdvancingRotation
  0000f	d9 5d fc	 fstp	 DWORD PTR tv69[ebp]
  00012	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR tv69[ebp]

; 58   : }

  00017	8b e5		 mov	 esp, ebp
  00019	5d		 pop	 ebp
  0001a	c3		 ret	 0
?GetAdvancingRotation@CInstanceBase@@QAEMXZ ENDP	; CInstanceBase::GetAdvancingRotation
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?GetRotation@CInstanceBase@@QAEMXZ
_TEXT	SEGMENT
tv69 = -4						; size = 4
?GetRotation@CInstanceBase@@QAEMXZ PROC			; CInstanceBase::GetRotation, COMDAT
; _this$ = ecx

; 51   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 52   : 	return m_GraphicThingInstance.GetRotation();

  00004	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  0000a	e8 00 00 00 00	 call	 ?GetRotation@CActorInstance@@QAEMXZ ; CActorInstance::GetRotation
  0000f	d9 5d fc	 fstp	 DWORD PTR tv69[ebp]
  00012	f3 0f 10 45 fc	 movss	 xmm0, DWORD PTR tv69[ebp]

; 53   : }

  00017	8b e5		 mov	 esp, ebp
  00019	5d		 pop	 ebp
  0001a	c3		 ret	 0
?GetRotation@CInstanceBase@@QAEMXZ ENDP			; CInstanceBase::GetRotation
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?NEW_LookAtDestInstance@CInstanceBase@@QAEXAAV1@@Z
_TEXT	SEGMENT
_rkInstDst$ = 8						; size = 4
?NEW_LookAtDestInstance@CInstanceBase@@QAEXAAV1@@Z PROC	; CInstanceBase::NEW_LookAtDestInstance, COMDAT
; _this$ = ecx

; 45   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 46   : 	m_GraphicThingInstance.LookAt(&rkInstDst.m_GraphicThingInstance);

  00003	81 45 08 d4 01
	00 00		 add	 DWORD PTR _rkInstDst$[ebp], 468 ; 000001d4H
  0000a	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H

; 47   : // 	Tracenf("LookAt %f", m_GraphicThingInstance.GetTargetRotation());
; 48   : }

  00010	5d		 pop	 ebp

; 46   : 	m_GraphicThingInstance.LookAt(&rkInstDst.m_GraphicThingInstance);

  00011	e9 00 00 00 00	 jmp	 ?LookAt@CActorInstance@@QAEXPAV1@@Z ; CActorInstance::LookAt
?NEW_LookAtDestInstance@CInstanceBase@@QAEXAAV1@@Z ENDP	; CInstanceBase::NEW_LookAtDestInstance
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?BlendRotation@CInstanceBase@@QAEXMM@Z
_TEXT	SEGMENT
?BlendRotation@CInstanceBase@@QAEXMM@Z PROC		; CInstanceBase::BlendRotation, COMDAT
; _this$ = ecx
; _fRotation$ = xmm1s
; _fBlendTime$ = xmm2s

; 31   : 	m_GraphicThingInstance.BlendRotation(fRotation, fBlendTime);

  00000	83 ec 08	 sub	 esp, 8
  00003	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  00009	f3 0f 11 54 24
	04		 movss	 DWORD PTR [esp+4], xmm2
  0000f	f3 0f 11 0c 24	 movss	 DWORD PTR [esp], xmm1
  00014	e8 00 00 00 00	 call	 ?BlendRotation@CActorInstance@@QAEXMM@Z ; CActorInstance::BlendRotation

; 32   : }

  00019	c3		 ret	 0
?BlendRotation@CInstanceBase@@QAEXMM@Z ENDP		; CInstanceBase::BlendRotation
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?NEW_GetPixelPosition@CInstanceBase@@QAEXPAUD3DXVECTOR3@@@Z
_TEXT	SEGMENT
_pPixelPosition$ = 8					; size = 4
?NEW_GetPixelPosition@CInstanceBase@@QAEXPAUD3DXVECTOR3@@@Z PROC ; CInstanceBase::NEW_GetPixelPosition, COMDAT
; _this$ = ecx

; 20   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 21   : 	*pPixelPosition=m_GraphicThingInstance.NEW_GetCurPixelPositionRef();	

  00003	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  00009	e8 00 00 00 00	 call	 ?NEW_GetCurPixelPositionRef@CActorInstance@@QAEABUD3DXVECTOR3@@XZ ; CActorInstance::NEW_GetCurPixelPositionRef
  0000e	8b 4d 08	 mov	 ecx, DWORD PTR _pPixelPosition$[ebp]
  00011	f3 0f 7e 00	 movq	 xmm0, QWORD PTR [eax]
  00015	66 0f d6 01	 movq	 QWORD PTR [ecx], xmm0
  00019	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  0001c	89 41 08	 mov	 DWORD PTR [ecx+8], eax

; 22   : }

  0001f	5d		 pop	 ebp
  00020	c2 04 00	 ret	 4
?NEW_GetPixelPosition@CInstanceBase@@QAEXPAUD3DXVECTOR3@@@Z ENDP ; CInstanceBase::NEW_GetPixelPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?SetRotation@CInstanceBase@@QAEXM@Z
_TEXT	SEGMENT
?SetRotation@CInstanceBase@@QAEXM@Z PROC		; CInstanceBase::SetRotation, COMDAT
; _this$ = ecx
; _fRotation$ = xmm1s

; 26   : 	m_GraphicThingInstance.SetRotation(fRotation);

  00000	51		 push	 ecx
  00001	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  00007	f3 0f 11 0c 24	 movss	 DWORD PTR [esp], xmm1
  0000c	e8 00 00 00 00	 call	 ?SetRotation@CActorInstance@@QAEXM@Z ; CActorInstance::SetRotation

; 27   : }

  00011	c3		 ret	 0
?SetRotation@CInstanceBase@@QAEXM@Z ENDP		; CInstanceBase::SetRotation
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
; File d:\metin2\metin2\client_source_clean\client_source_clean\extern\include\d3dx8math.inl
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
; File d:\metin2\metin2\client_source_clean\client_source_clean\extern\include\d3dx8math.inl
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?SCRIPT_SetPixelPosition@CInstanceBase@@QAEXMM@Z
_TEXT	SEGMENT
$T1 = -16						; size = 12
__$ArrayPad$ = -4					; size = 4
?SCRIPT_SetPixelPosition@CInstanceBase@@QAEXMM@Z PROC	; CInstanceBase::SCRIPT_SetPixelPosition, COMDAT
; _this$ = ecx
; _fx$ = xmm1s
; _fy$ = xmm2s

; 9    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 10	 sub	 esp, 16			; 00000010H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	0f 28 c1	 movaps	 xmm0, xmm1
; File d:\metin2\metin2\client_source_clean\client_source_clean\extern\include\d3dx8math.inl

; 181  :     y = fy;

  00013	f3 0f 11 55 f4	 movss	 DWORD PTR $T1[ebp+4], xmm2
  00018	56		 push	 esi
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp

; 10   : 	float fz = __GetBackgroundHeight(fx, fy);

  00019	0f 28 ca	 movaps	 xmm1, xmm2
; File d:\metin2\metin2\client_source_clean\client_source_clean\extern\include\d3dx8math.inl

; 180  :     x = fx;

  0001c	f3 0f 11 45 f0	 movss	 DWORD PTR $T1[ebp], xmm0
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp

; 9    : {

  00021	8b f1		 mov	 esi, ecx

; 10   : 	float fz = __GetBackgroundHeight(fx, fy);

  00023	e8 00 00 00 00	 call	 ?__GetBackgroundHeight@CInstanceBase@@KAMMM@Z ; CInstanceBase::__GetBackgroundHeight

; 11   : 	NEW_SetPixelPosition(TPixelPosition(fx, fy, fz));

  00028	8d 45 f0	 lea	 eax, DWORD PTR $T1[ebp]
  0002b	f3 0f 11 45 f8	 movss	 DWORD PTR $T1[ebp+8], xmm0
  00030	50		 push	 eax
  00031	8b ce		 mov	 ecx, esi
  00033	e8 00 00 00 00	 call	 ?NEW_SetPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z ; CInstanceBase::NEW_SetPixelPosition

; 12   : }

  00038	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0003b	33 cd		 xor	 ecx, ebp
  0003d	5e		 pop	 esi
  0003e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00043	8b e5		 mov	 esp, ebp
  00045	5d		 pop	 ebp
  00046	c3		 ret	 0
?SCRIPT_SetPixelPosition@CInstanceBase@@QAEXMM@Z ENDP	; CInstanceBase::SCRIPT_SetPixelPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?NEW_SetPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z
_TEXT	SEGMENT
_c_rPixelPosition$ = 8					; size = 4
?NEW_SetPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z PROC ; CInstanceBase::NEW_SetPixelPosition, COMDAT
; _this$ = ecx

; 15   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 16   : 	m_GraphicThingInstance.SetCurPixelPosition(c_rPixelPosition);		

  00003	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H

; 17   : }

  00009	5d		 pop	 ebp

; 16   : 	m_GraphicThingInstance.SetCurPixelPosition(c_rPixelPosition);		

  0000a	e9 00 00 00 00	 jmp	 ?SetCurPixelPosition@CActorInstance@@QAEXABUD3DXVECTOR3@@@Z ; CActorInstance::SetCurPixelPosition
?NEW_SetPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z ENDP ; CInstanceBase::NEW_SetPixelPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?NEW_LookAtFlyTarget@CInstanceBase@@QAEXXZ
_TEXT	SEGMENT
?NEW_LookAtFlyTarget@CInstanceBase@@QAEXXZ PROC		; CInstanceBase::NEW_LookAtFlyTarget, COMDAT
; _this$ = ecx

; 36   : 	m_GraphicThingInstance.LookAtFlyTarget();

  00000	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  00006	e9 00 00 00 00	 jmp	 ?LookAtFlyTarget@CActorInstance@@QAEXXZ ; CActorInstance::LookAtFlyTarget
?NEW_LookAtFlyTarget@CInstanceBase@@QAEXXZ ENDP		; CInstanceBase::NEW_LookAtFlyTarget
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?NEW_LookAtDestPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z
_TEXT	SEGMENT
_c_rkPPosDst$ = 8					; size = 4
?NEW_LookAtDestPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z PROC ; CInstanceBase::NEW_LookAtDestPixelPosition, COMDAT
; _this$ = ecx

; 40   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 41   : 	m_GraphicThingInstance.LookAt(c_rkPPosDst.x, -c_rkPPosDst.y);

  00003	8b 45 08	 mov	 eax, DWORD PTR _c_rkPPosDst$[ebp]
  00006	83 ec 08	 sub	 esp, 8
  00009	81 c1 d4 01 00
	00		 add	 ecx, 468		; 000001d4H
  0000f	f3 0f 10 40 04	 movss	 xmm0, DWORD PTR [eax+4]
  00014	0f 57 05 00 00
	00 00		 xorps	 xmm0, DWORD PTR __xmm@80000000800000008000000080000000
  0001b	f3 0f 11 44 24
	04		 movss	 DWORD PTR [esp+4], xmm0
  00021	f3 0f 10 00	 movss	 xmm0, DWORD PTR [eax]
  00025	f3 0f 11 04 24	 movss	 DWORD PTR [esp], xmm0
  0002a	e8 00 00 00 00	 call	 ?LookAt@CActorInstance@@QAEXMM@Z ; CActorInstance::LookAt

; 42   : }

  0002f	5d		 pop	 ebp
  00030	c2 04 00	 ret	 4
?NEW_LookAtDestPixelPosition@CInstanceBase@@QAEXABUD3DXVECTOR3@@@Z ENDP ; CInstanceBase::NEW_LookAtDestPixelPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?SetDirection@CInstanceBase@@QAEXH@Z
_TEXT	SEGMENT
_fDegree$1$ = 8						; size = 4
_dir$ = 8						; size = 4
?SetDirection@CInstanceBase@@QAEXH@Z PROC		; CInstanceBase::SetDirection, COMDAT
; _this$ = ecx

; 61   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 62   : 	float fDegree = GetDegreeFromDirection(dir);

  00004	ff 75 08	 push	 DWORD PTR _dir$[ebp]
  00007	8b f1		 mov	 esi, ecx
  00009	e8 00 00 00 00	 call	 ?GetDegreeFromDirection@CInstanceBase@@QAEMH@Z ; CInstanceBase::GetDegreeFromDirection

; 63   : 	SetRotation(fDegree);

  0000e	0f 28 c8	 movaps	 xmm1, xmm0
  00011	f3 0f 11 45 08	 movss	 DWORD PTR _fDegree$1$[ebp], xmm0
  00016	e8 00 00 00 00	 call	 ?SetRotation@CInstanceBase@@QAEXM@Z ; CInstanceBase::SetRotation

; 64   : 	SetAdvancingRotation(fDegree);

  0001b	f3 0f 10 4d 08	 movss	 xmm1, DWORD PTR _fDegree$1$[ebp]
  00020	8b ce		 mov	 ecx, esi
  00022	e8 00 00 00 00	 call	 ?SetAdvancingRotation@CInstanceBase@@QAEXM@Z ; CInstanceBase::SetAdvancingRotation
  00027	5e		 pop	 esi

; 65   : }

  00028	5d		 pop	 ebp
  00029	c2 04 00	 ret	 4
?SetDirection@CInstanceBase@@QAEXH@Z ENDP		; CInstanceBase::SetDirection
_TEXT	ENDS
; Function compile flags: /Ogtp
; File d:\metin2\metin2\client_source_clean\client_source_clean\source\userinterface\instancebasetransform.cpp
;	COMDAT ?GetDegreeFromDirection@CInstanceBase@@QAEMH@Z
_TEXT	SEGMENT
_dir$ = 8						; size = 4
?GetDegreeFromDirection@CInstanceBase@@QAEMH@Z PROC	; CInstanceBase::GetDegreeFromDirection, COMDAT
; _this$dead$ = ecx

; 73   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 74   : 	if (dir < 0)

  00003	8b 45 08	 mov	 eax, DWORD PTR _dir$[ebp]
  00006	85 c0		 test	 eax, eax
  00008	79 07		 jns	 SHORT $LN2@GetDegreeF
$LN5@GetDegreeF:
  0000a	0f 57 c0	 xorps	 xmm0, xmm0

; 93   : }

  0000d	5d		 pop	 ebp
  0000e	c2 04 00	 ret	 4
$LN2@GetDegreeF:

; 75   : 		return 0.0f;
; 76   : 
; 77   : 	if (dir >= DIR_MAX_NUM)

  00011	83 f8 08	 cmp	 eax, 8
  00014	7d f4		 jge	 SHORT $LN5@GetDegreeF

; 78   : 		return 0.0f;
; 79   : 	
; 80   : 	static float s_dirRot[DIR_MAX_NUM]=
; 81   : 	{
; 82   : 		+45.0f * 4,
; 83   : 		+45.0f * 3,
; 84   : 		+45.0f * 2,
; 85   : 		+45.0f,
; 86   : 		+0.0f,
; 87   : 		360.0f-45.0f,
; 88   : 		360.0f-45.0f * 2,
; 89   : 		360.0f-45.0f * 3,
; 90   : 	};
; 91   : 
; 92   : 	return s_dirRot[dir];

  00016	f3 0f 10 04 85
	00 00 00 00	 movss	 xmm0, DWORD PTR ?s_dirRot@?5??GetDegreeFromDirection@CInstanceBase@@QAEMH@Z@4PAMA[eax*4]

; 93   : }

  0001f	5d		 pop	 ebp
  00020	c2 04 00	 ret	 4
?GetDegreeFromDirection@CInstanceBase@@QAEMH@Z ENDP	; CInstanceBase::GetDegreeFromDirection
_TEXT	ENDS
END
